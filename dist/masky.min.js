new class{constructor(){this.inputs=null,this.tokens={0:{validateRule:/\d/},A:{validateRule:/[a-zA-Z0-9]/},S:{validateRule:/[a-zA-Z]/}},this.init()}init(){"complete"===document.readyState?this.getInput():window.addEventListener("load",this.init.bind(this))}getInput(){this.inputs=document.querySelectorAll("input[data-mask]"),this.inputs.forEach((t=>{t.addEventListener("input",this.maskInput.bind(this)),t.addEventListener("blur",this.validateInput.bind(this))}))}setInputLength(t,e,i="",n=""){if(t.hasAttribute("minlength")&&t.hasAttribute("maxlength"))return;const s=e.length+((null==i?void 0:i.length)||0)+((null==n?void 0:n.length)||0);t.hasAttribute("minlength")||(t.minLength=s),t.hasAttribute("maxlength")||(t.maxLength=s)}setInputMode(t,e){if(t.hasAttribute("inputMode"))return;const i=[...e].filter((t=>this.tokens[t])),n=[...new Set(i)],s=1===n.length&&"0"===n[0];t.inputMode=s?"numeric":"text"}maskInput(t){const e=t.target;if(e.setCustomValidity(""),"deleteContentBackward"===t.inputType)return;const i=e.dataset.mask,n=e.dataset.maskPrefix,s=e.dataset.maskSuffix;this.setInputLength(e,i,n,s),this.setInputMode(e,i);const a=this.removeMask(i,e.value,n,s),r="true"===e.dataset.maskReverse,l=this.applyMask(a,i,r,n,s);e.value=l,e.checkValidity()}removeMask(t,e,i,n){if(!t||!e)return e;i&&(e=e.replace(i,"")),n&&(e=e.replace(n,""));const s=Object.keys(this.tokens),a=new RegExp(`[${s.join("")}]`,"g"),r=t.replace(a,"");return e.replace(new RegExp(`[${r}]`,"g"),"")}applyMask(t,e,i,n,s){if(!t)return t;let a="",r=0,l=e.split("");i&&(t=t.split("").reverse().join(""),l=l.reverse());for(let e=0;e<l.length;e++)if(this.tokens[l[e]]){const i=this.tokens[l[e]];if(!new RegExp(i.validateRule).test(t[r])||!t[r])break;a+=t[r],r++}else a+=l[e];return i&&(a=a.split("").reverse().join(""),a=a.startsWith(".")?a.substring(1):a),n&&(a=n+a),s&&(a+=s),a}validateInput(t){const e=t.target,i=e.value,n=i.length,s=e.minLength,a=e.dataset.maskValidation||null;if(n>0&&n<s){const t=`The minimum number of characters required is ${s}. Please complete the field.`;return e.setCustomValidity(t),void e.reportValidity()}const r={cpf:this.isValidCPF,cnpj:this.isValidCNPJ};if(i&&a&&r[a]&&!r[a](i)){const t=`Invalid ${a.toUpperCase()}. Please enter a valid value.`;return e.setCustomValidity(t),void e.reportValidity()}e.setCustomValidity("")}isValidCPF(t){const e=t.replace(/[^\d]+/g,"");if(11!==e.length||/^(\d)\1{10}$/.test(e))return!1;for(let t=9;t<11;t++){let i=0;for(let n=0;n<t;n++)i+=parseInt(e[n])*(t+1-n);const n=10*i%11%10;if(parseInt(e[t])!==n)return!1}return!0}isValidCNPJ(t){if(14!==(t=t.replace(/[^\d]+/g,"")).length||/^(\d)\1+$/.test(t))return!1;const e=(t,e)=>{let i=0;for(let n=0;n<t.length;n++)i+=t[n]*e[n];const n=i%11;return n<2?0:11-n},i=t.slice(0,12),n=e(i,[5,4,3,2,9,8,7,6,5,4,3,2]),s=e(i+n,[6,5,4,3,2,9,8,7,6,5,4,3,2]);return t===i+n.toString()+s.toString()}};